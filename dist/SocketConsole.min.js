
/*!
 * SocketConsole - Send console messages over a Socket.io connection
 * v0.1.0
 * http://lgoldstien.github.io/SocketConsole
 * copyright Lawrence Goldstien 2014
 * MIT License
*/
var SocketConsole=function(a,b){this.__socketIOAddr=a,this.__overrides=b,this._startSocket(a)};SocketConsole.prototype._replaceConsole=function(){var a=this;if(this._hasOverrides)return!1;console.info("SocketConsole: attempting to hijack the console"),this.__overrides.forEach(function(b){var c=window.console[b];window.console[b]=function(){c.apply(console,arguments),a._emit(b,a._stringify(arguments))}});var b=window.onerror,c=function(){return b&&b.apply(window,arguments),a._emit("window.onerror",a._stringify(arguments)),!1};window.onerror=c,document.onerror=c,this._hasOverrides=!0},SocketConsole.prototype._startSocket=function(a){this._socket=io(a),this._socket.on("connect",this._replaceConsole.bind(this))},SocketConsole.prototype._emit=function(a,b){this._socket.emit("console",{type:"log",msg:b})},new SocketConsole("http://localhost:3000",["error","info"]),function(){"use strict";function a(a){return j.lastIndex=0,j.test(a)?'"'+a.replace(j,function(a){var b=k[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function b(e,f,g,h){var i,j,k,l,m=f[e];switch(m&&"object"==typeof m&&"function"==typeof m.toPrunedJSON&&(m=m.toPrunedJSON(e)),typeof m){case"string":return a(m);case"number":return isFinite(m)?String(m):"null";case"boolean":case"null":return String(m);case"object":if(!m)return"null";if(0>=g||-1!==c.indexOf(m))return'"-pruned-"';if(c.push(m),l=[],"[object Array]"===Object.prototype.toString.apply(m)){for(k=Math.min(m.length,h),i=0;k>i;i+=1)l[i]=b(i,m,g-1,h)||"null";return"["+l.join(",")+"]"}return d(m,function(c){try{j=b(c,m,g-1,h),j&&l.push(a(c)+":"+j)}catch(d){}}),"{"+l.join(",")+"}"}}var c,d,e=6,f=50,g=function(a,b){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b(c)},h=function(a,b){for(var c in a)b(c)},i=function(a,b,c){null!==a&&(c=c||{},Object.getOwnPropertyNames(a).forEach(function(a){c[a]||(b(a),c[a]=!0)}),i(Object.getPrototypeOf(a),b,c))};Date.prototype.toPrunedJSON=Date.prototype.toJSON,String.prototype.toPrunedJSON=String.prototype.toJSON;var j=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,k={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};JSON.prune=function(a,j,k){if("object"==typeof j){var l=j;j=l.depthDecr,k=l.arrayMaxLength,d=l.iterator||g,l.allProperties?d=i:l.inheritedProperties&&(d=h)}else d=g;return c=[],j=j||e,k=k||f,b("",{"":a},j,k)},JSON.prune.log=function(){console.log.apply(console,Array.prototype.slice.call(arguments).map(function(a){return JSON.parse(JSON.prune(a))}))},JSON.prune.forEachProperty=i}(),SocketConsole.prototype._stringify=JSON.prune;